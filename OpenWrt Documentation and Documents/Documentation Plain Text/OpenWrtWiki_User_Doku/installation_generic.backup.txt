====== 通用备份 ======
===== 建立备份 =====
再一次强调，请先查看 [[docs:techref:flash.layout#Details]]，并注意[[docs:techref:bootloader]]分区和''ART''、''NVRAM''等等小分区没有包含在OpenWrt固件。因而某些错误导致这些分区数据被损坏，将不能恢复它！你的机器可能已经无法启动，你不得不去论坛问其它人要这些分区的备份，然后发送给你，你还要替换MAC地址然后通过 [[docs:techref:hardware:port.jtag]] 恢复。

如前所述，这些分区不是OpenWrt固件的一部分，刷OpenWrt固件不会改写他们。因而通常不太可能受损，但并不是不可能，所以你应该做一个备份。

如果ART分区损坏，仍然能够启动OpenWrt，只是无线网络不再正常工作。简单修复办法 ''[[docs:techref:mtd]]''。
<code>
dd if=/dev/$(grep '"art"' /proc/mtd |cut -c 1-4) of=/tmp/art.backup
</code>
如果bootloader分区损坏，不会有 [[docs:techref:bootloader#additional_functions|booloader console]]，只能通过 [[docs:techref:hardware:port.serial|Serial Port]] 连接 [[docs:techref:hardware:port.jtag|JTAG Port]] 来恢复或焊下flash芯片，参阅 [[docs:guide-user:troubleshooting:generic.debrick]] 获得帮助。

However, once you've gotten yourself into the position to write to the flash again, you will still need something you can write to it. Something that will work. And here is, where your backup will come in handy:
（不理解这些，通过如下代码备份）
（大概意思，一但出现这情况，你要想办法重写这些数据，你的备份将派上用场：）
<code>
dd if=/dev/mtd0 of=/tmp/boot.backup
</code>
然后通过scp或ssh复制备份文件到您的电脑并妥善保存，可能有需要它们的时候。

===== 恢复备份 =====
===== 备份配置 =====
<code>
cd /etc; tar -cvzf config.tar.gz config/ 
</code>
通过ssh等复制到其它地方。
==== Bootloader 控制台 ====
大多数bootloader允许使用mtd分区, 但要注意: 他们不一定是相同的内核MTD分区! 此外, 有一些bootloader, 你不能使用mtd分区, 必须使用绝对位移. 在这种情况, 在你备份时写下这些正确的位移可能是一个好主意.

==== OpenWrt操作 ====
试试： <code>mtd write art.backup art</code>
以上代码可以正常工作, 但最有可能是art分区通常不可写, 所以你需要自己编译一个做了些细微修改的内核，如这里描述的:
[[toh/tp-link/tl-wr1043nd#making.readonly.mtd.partition.writable|TL-WR1043ND]]
或这里: [[https://forum.openwrt.org/viewtopic.php?pid=135278#p135278]].
然后写入你的设备, 重启, 现在这分区将是可写的.
From:
[[https://forum.openwrt.org/viewtopic.php?pid=134950#p134950]]
[[https://forum.openwrt.org/viewtopic.php?pid=99089#p99089]]
