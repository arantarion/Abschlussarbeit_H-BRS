====== BoxBackup Server Configuration (bbstored) ======
===== Sections =====
==== Main Server Config ====
There is one ''bbstored'' section which is used to build the bbstored.conf used by the initscript.

Sanitized from a working example:

<code bash>
config 'bbstored'
        option 'accountdb' '/opt/etc/bbstored/accounts.txt'
        option 'extlog'    '1'
        option 'user'      'bbstored'
        option 'group'     'bbstored'
        option 'address'   '192.168.1.1'
        option 'certfile'  '/etc/bbstored/hostname-boxbackup.example.com-cert.pem'
        option 'keyfile'   '/etc/bbstored/hostname-boxbackup.example.com-key.pem'
        option 'cafile'    '/etc/bbstored/example.com-CA.pem'
</code>

The ''bbstored'' section contains these settings:
^ Name ^ Type ^ Required ^ Default ^ Description ^
| ''config_path'' | string | no | ''/var/etc/boxbackup'' | Where to stash the temporary config file (which is what is actually used by the daemon). |
| ''raidfileconf'' | string | no | ''/var/etc/boxbackup/raidfile.conf'' | The file to use for defining the actual storage (which boxbackup calls raidfile for historical reasons) |
| ''accountdb'' | string | no | ''/etc/bbstored/accounts.txt'' | The accounts 'database'.  Managed by bbstoreaccounts and required by bbstored, but must be present (but can be empty) before you can run bbstoreaccounts to create an account store. Must be persistent across boots. |
| ''extlog'' | boolean | no | ''1'' | Whether to do ''Extended Logging'' of connections with the clients |
| ''housekeep_time'' | integer | no | ''900'' | Seconds between housekeeping runs |
| ''user'' | string | no | ''nobody'' | User to run as |
| ''group'' | string | no | ''nogroup'' | Group to own the temporary config file directory |
| ''address'' | IP Address or hostname | yes | //(none)// | IP Address or hostname of host running the server.  Must be resolvable to self by bbstored. |
| ''certfile'' | string | yes | //(none)// | OpenSSL certificate file for this server |
| ''keyfile'' | string | yes | //(none)// | OpenSSL private key for this server |
| ''cafile'' | string | yes | //(none)// | Certficate Authority (CA) certificate which we recognize as allowed for clients that want to connect |
| ''pidfile'' | string | no | ''/var/run/bbstored.pid'' | Path to PID file |

==== Storage Config ====
There can be multiple ''raidfile'' sections each of which must have a unique ''setnum'', and which are used to define a backup store to be used by accounts.  (bbstoreaccounts is used to create an account associate with a backup store).

Sanitized from a working example:

<code bash>
config 'raidfile'
        option 'setnum'    '0'
        option 'blocksize' '1024'
        option 'path'      '/srv/backups'
</code>

The ''raidfile'' sections contain these settings:
^ Name ^ Type ^ Required ^ Default ^ Description ^
| ''setnum'' | integer | yes | //(none)// | The integer number associated with the backup store.  Must not change. |
| ''blocksize'' | integer | no | ''1024'' | Blocksize to use for storing data in the store.  Defaults to fs blocksize |
| ''path'' | string | yes | //(none)// | Path to the backup store.  Must be read-write for the bbstored user. |
