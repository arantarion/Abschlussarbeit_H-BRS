====== Исходный код LEDE ======

Исходный код проекта LEDE начинается с версии OpenWrt r49258. Код хранится внутри дерева git, который содержит все ветви и релизы, когда-либо созданные OpenWrt. При импорте источников дерево было нормализовано, а некоторые мелкие хитрости были сделаны для имен коммитеров и почтовых адресов.

Все репозитории можно просматривать через Интернет через:

  - [[https://git.lede-project.org/|Gitweb]] - главный хранилище Git для LEDE
  - [[https://github.com/lede-project|Github]] - постоянно обновляемое зеркало Gitweb


===== Репозитории исходного кода LEDE =====

Любая разработка LEDE происходит в основном openwrt.git репозитории, который доступен как через HTTP, так и HTTPS:

<code>
git clone https://git.openwrt.org/openwrt/openwrt.git
</code>

Вы можете найти зеркало репозитория на Github:

<code>
git clone https://github.com/openwrt/openwrt.git
</code>

==== Общая структура источника ====

Это папки, которые вы можете найти в git проекта:

  * **/config** : файлы конфигурации для menuconfig
  * **/include** : файлы конфигурации makefile
  * **/package** : пакеты makefile и конфигурация
  * **/scripts** : разные скрипты, используемые в процессе сборки
  * **/target** : makefile и конфигурация для построения imagebuilder, ядра, sdk и инструментальной цепочки, построенной buildroot.
  * **/toolchain** : makefile и конфигурация для создания инструментальной цепочки
  * **/tools** : различные инструменты, используемые в процессе сборки

===== Релизы =====

Генерирование выпусков уже было значительно автоматизировано. Остальные части процесса также должны быть автоматизированы перед первым выпуском LEDE . Мы представим файл TESTERS, который отформатирован аналогично файлу MAINTAINERS ядра. Члены сообщества могут перечислить себя как тестеры для цели / профиля / устройства. После того, как релиз был сгенерирован, тестеры должны получить электронное сообщение, информирующее их о необходимости проверки изображений. Необходимо решить, должны ли быть включены только проверенные изображения в двоичной версии.

Релизы должны:

  - Происходит не реже одного раза в год
  - По крайней мере, одно обновление обслуживания
  - Предоставление CVE / критических / ... исправлений в течение как минимум одного года после выпуска
  - Включать только поддерживаемые цели
  - Включать только те объекты, которые были обнаружены при тестировании устройства.
  - Будьте готовы, когда они будут готовы

Дополнительную информацию см. На странице TODO.

===== Постановка деревьев =====

Чтобы создать себе промежуточное дерево на git.lede-project.org (не распространяется на обычных пользователей): 

<code>
ssh <git@git.lede-project.org> "create lede/yournick/staging" 
ssh <git@git.lede-project.org> "desc lede/yournick/staging Staging tree of Your Name"
</code>

Чтобы получить ваше промежуточное дерево на https://git.lede-project.org:

<code>
ssh <git@git.lede-project.org> "perms lede/yournick/staging + READERS gitweb"
</code>

Чтобы ваше старое дерево было доступно для всех:

<code>
ssh <git@git.lede-project.org> "perms lede/yournick/staging + READERS @all "
</code>

==== Обновления ядра ====

Было доказано, что нецелесообразно и тратить время, чтобы всегда быть на самом последнем ядре в течение двух дней после его выпуска. Это вызвало
следующее

  - диверсификация версий ядра
  - давление на сопровождающих постоянно обновляется, а не стабилизируется
  - огромные усилия вложились в обновление в 3-4 раза между выпусками
  - огромная рабочая нагрузка для поддержки kmod- * упаковки
  - Обновите ядра, которые могут быть не полностью протестированы

Очевидно, это не оправдывает старые, пыльные ядра. Должен быть принят сбалансированный путь между двумя, который дает последние ядра сообщества, не вызывая ненужных проблем с рабочей нагрузкой и стабильностью.

Должно быть не более трех одновременных версий ядра. Наличие двух одновременных версий лучше трех.

В краткосрочной - стабильность должна быть оценена выше, чем кровотечение. Кровотечение важно, но не как компромисс к стабильности.

===== Добавление нового устройства =====

**[[docs:guide-developer:adding_new_device|Добавление нового устройства]]** Общие сведения о добавлении нового устройства

===== Исходный код OpenWrt =====

Мы сохраняем исходный исходный код OpenWrt до [[https://git.lede-project.org/?p=openwrt/source.git;a=commit;h=ee53a240ac902dc83209008a2671e7fdcf55957a|r49258]] доступным, в основном в качестве справочного и исторического интереса.

Исходный репозиторий OpenWrt Subversion был разделен на несколько репозиториев Git, сопоставляющих различные каталоги и теги SVN с соответствующими ветвями Git.

<code>
git clone https://git.lede-project.org/openwrt/source.git 
git clone https://git.lede-project.org/openwrt/packages.git 
git clone https://git.lede-project.org/openwrt/feeds.git 
git clone https://git.lede-project.org/openwrt/docs.git
</code>

