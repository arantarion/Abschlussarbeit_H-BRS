====== Serial console password ======
OpenWrt serial console is not protected by default by a password.
As a principle, networking hardware should never be accessible and should be locked-down to avoid attacks.

See also: [[https://forum.openwrt.org/viewtopic.php?pid=287967|Forum thread]], [[https://dev.openwrt.org/ticket/20359|Support ticket]], [[docs:guide-developer:single.package|How to build a single package]]

===== Default behavior =====
After OpenWrt first boot, a password is defined by the user in order to protect SSH and LuCI HTTP(S) access.
However access to the serial console is still available without password.
Very few OpenWrt users are aware that their hardware is wide open, and you should be aware and find solutions.

===== Enable serial console password =====
<code bash>
uci set system.@system[0].ttylogin="1"
uci commit system
service system restart
</code>

===== Recompile busybox if required =====
You will need to recompile busybox because it does not include the line ''CONFIG_BUSYBOX_CONFIG_LOGIN'' by default into ''.config''.
Run make menuconfig and enable "Base system -> busybox -> Login/Password Management Utilities -> login".
Save, exit and verify the ''.config'' contains ''CONFIG_BUSYBOX_CONFIG_LOGIN=y''.

Compile:

<code bash>
make package/busybox/compile
make package/busybox/install
</code>

Get the busybox package: ''<build_dir>/bin/<arch>/packages/base/busybox_<version>.ipk''.

===== Disabling Linux single user mode =====
Single user mode is available through GRUB and allows to boot without password.
An attacker is then able to change root password and reboot.

A solution would be to lock-down OpenWrt booloader process, to make sure that booting in linux single user mode is impossible.
This has to be discussed and this is not yet documented.

===== Hardware attacks =====
You should know that hardware attacks on serial console pins are always possible.
However, it requires time and skills.
